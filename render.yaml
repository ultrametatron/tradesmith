services:
  - name: tradesmith-worker
    type: worker
    runtime: python
    plan: standard
    disk:
      name: tradesmith-data
      mountPath: /data
    buildCommand: pip install -r requirements.txt
    startCommand: python worker.py
    envVars:
      - key: OPENAI_API_KEY
      - key: FMP_API_KEY

  - name: tradesmith-daily-report
    type: cron
    runtime: python
    schedule: "0 0 * * 2-6"
    buildCommand: pip install -r requirements.txt
    startCommand: python run_daily_delivery.py
    envVars:
      - key: OPENAI_API_KEY
      - key: SMTP_SERVER
      - key: SMTP_PORT
      - key: SMTP_USER
      - key: SMTP_PASS
      - key: DELIVERY_EMAIL

  - name: tradesmith-weekly-report
    type: cron
    runtime: python
    schedule: "0 0 * * SAT"
    buildCommand: pip install -r requirements.txt
    startCommand: python run_weekly_report.py
    envVars:
      - key: OPENAI_API_KEY